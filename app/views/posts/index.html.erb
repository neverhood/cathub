<%= page_header %>

<%- if user_signed_in? or admin_signed_in? %>
  <%= link_to t('.new'), nil, id: 'new-post-form-toggler' %>

  <div id='new-post-form-container' class='well'>
    <%= simple_form_for @post, html: { multipart: true, id: 'new-post' } do |form| %>
      <div class='form-inputs'>
        <div id='media-switch'>
          <%= icon_label 'icon-picture active', nil, id: 'image-uploader' %>
          <%= icon_label 'icon-youtube', nil, id: 'video-uploader' %>
        </div>

        <%= form.simple_fields_for :media do |media| %>
          <div id='image-uploader-container'> <%= media.input :image, as: :file %> </div>
          <div id='video-uploader-container'> <%= media.input :url, placeholder: t('.video_placeholder'), input_html: { class: 'span5' } %> </div>
        <% end %>

        <%= form.input :description, input_html: { class: 'span5' } %>
      </div>

      <%= form.button :submit, t('common.submit'), data: { disable_with: t('common.please_wait') } %>
    <% end %>

  </div>

  <hr />
<% end %>


<div id='posts'>
  <%= render @posts %>
</div>

<%= render 'image_modal' %>
